<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Registrar una Rutina</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  
  <ion-list-header>
    <ion-label class="header">Registrar una rutina</ion-label>
  </ion-list-header>
  <form (submit)="createRoutine()" #routineForm="ngForm">
    <ion-item class="form-item">
      <ion-label position="floating">Nombre de la Rutina</ion-label>
      <ion-input [(ngModel)]="routine.name" name="name" required></ion-input>
    </ion-item>

    <ion-item class="form-item">
      <ion-label position="floating">Descripción</ion-label>
      <ion-textarea [(ngModel)]="routine.description" name="description" required></ion-textarea>
    </ion-item>

    <ion-item class="form-item">
      <ion-label position="floating">Duración (minutos)</ion-label>
      <ion-input type="number" [(ngModel)]="routine.duration" name="duration" required></ion-input>
    </ion-item>

    <ion-item class="form-item">
      <ion-label position="floating">Descanso entre series (segundos)</ion-label>
      <ion-input type="number" [(ngModel)]="routine.restTime" name="restTime" required></ion-input>
    </ion-item>

    <ion-item class="form-item">
      <ion-label>Días de la Rutina</ion-label>
      <ion-select multiple="true" [(ngModel)]="routine.days" name="days">
        <ion-select-option value="0">Domingo</ion-select-option>
        <ion-select-option value="1">Lunes</ion-select-option>
        <ion-select-option value="2">Martes</ion-select-option>
        <ion-select-option value="3">Miércoles</ion-select-option>
        <ion-select-option value="4">Jueves</ion-select-option>
        <ion-select-option value="5">Viernes</ion-select-option>
        <ion-select-option value="6">Sábado</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item class="form-item">
      <ion-label>Imagen de la Rutina</ion-label>
      <ion-button expand="full" (click)="selectImageForRoutine()">Seleccionar Imagen</ion-button>
      <ion-img [src]="routine.imageUrl" *ngIf="routine.imageUrl" class="routine-image"></ion-img>
    </ion-item>

    <!-- Ejercicios Section -->
    <ion-list>
      <ion-list-header>
        <ion-label class="header">Ejercicios</ion-label>
      </ion-list-header>

      <div *ngFor="let exercise of routine.exercises; let i = index" class="exercise-item">
        <ion-item class="form-item">
          <ion-label position="floating">Nombre del Ejercicio</ion-label>
          <ion-input [(ngModel)]="exercise.name" name="exercise-{{i}}-name" required></ion-input>
        </ion-item>

        <ion-item class="form-item">
          <ion-label position="floating">Series</ion-label>
          <ion-input type="number" [(ngModel)]="exercise.series" name="exercise-{{i}}-series" required></ion-input>
        </ion-item>

        <ion-item class="form-item">
          <ion-label position="floating">Repeticiones</ion-label>
          <ion-input type="number" [(ngModel)]="exercise.reps" name="exercise-{{i}}-reps" required></ion-input>
        </ion-item>

        <ion-item class="form-item">
          <ion-label>Imagen del Ejercicio</ion-label>
          <ion-button expand="full" (click)="selectImageForExercise(exercise)">Seleccionar Imagen</ion-button>
          <ion-img [src]="exercise.imageUrl" *ngIf="exercise.imageUrl" class="exercise-image"></ion-img>
        </ion-item>

        <ion-button class="boton" color="danger" (click)="removeExercise(i)">Eliminar Ejercicio</ion-button>
      </div>

      <ion-button class="boton" (click)="addExercise()">Agregar ejercicio</ion-button>
    </ion-list>

    <ion-button type="submit" expand="full" class="create-button">Crear Rutina</ion-button>
  </form>
</ion-content>
